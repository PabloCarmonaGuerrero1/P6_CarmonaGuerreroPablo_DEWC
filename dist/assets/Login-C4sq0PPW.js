import{a as g}from"./axios-Bo0ATomq.js";import{_ as f,c as n,a as o,g as l,v as p,t as u,d,e as w,w as _,n as m,h as v,r as y,o as a}from"./index-Co1rkqzz.js";const U={data(){return{username:"",password:"",errors:{username:"",password:""},submitDisabled:!1,isLightMode:localStorage.getItem("light-mode")==="true"}},methods:{async loginUser(){try{const e=`http://localhost/api/v1/users/${this.username}`,r=await g.get(e);r.data&&(r.data.password===this.password?(localStorage.setItem("username",this.username),this.$router.push("/homepage")):(this.errors.password="Incorrect password.",this.errors.username=""))}catch(e){e.response&&e.response.status===404?(this.errors.username="User not found.",this.errors.password=""):e.response?(console.error("Server responded with an error status:",e.response.status),console.error("Error data:",e.response.data)):e.request?console.error("No response received from the server"):console.error("Error setting up the request:",e.message)}}}},b=o("p",{class:"titleform"},"Username",-1),x={key:0,class:"error"},k=o("p",{class:"titleform"},"Password",-1),L={key:0,class:"error"},M=o("button",{type:"submit"},"Login",-1);function S(e,r,c,V,s,i){const h=y("router-link");return a(),n("form",{class:m(["Login",{"light-mode-title":s.isLightMode}]),onSubmit:r[2]||(r[2]=v((...t)=>i.loginUser&&i.loginUser(...t),["prevent"]))},[o("label",null,[b,l(o("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>s.username=t),type:"text"},null,512),[[p,s.username]]),s.errors.username?(a(),n("div",x,u(s.errors.username),1)):d("",!0)]),o("label",null,[k,l(o("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>s.password=t),type:"password"},null,512),[[p,s.password]]),s.errors.password?(a(),n("div",L,u(s.errors.password),1)):d("",!0)]),M,w(h,{to:"/Register"},{default:_(()=>[o("p",{class:m(["goregister",{"light-mode-register":s.isLightMode}])},"Press here to register!",2)]),_:1})],34)}const B=f(U,[["render",S]]);export{B as default};
