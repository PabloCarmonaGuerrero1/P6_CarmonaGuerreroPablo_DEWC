import{a as c}from"./axios-Bo0ATomq.js";import{_ as g,c as a,a as s,g as n,j as p,v,t as u,d as o,h as b,n as w,o as d}from"./index-Co1rkqzz.js";const f={data(){return{selected:"review",review:"",advice:"",email:"",rating:"",date:"",useradvice:"",errors:{review:"",rating:"",email:"",advice:"",date:"",useradvice:""},isSubmitDisabled:!0,isLightMode:localStorage.getItem("light-mode")==="true"}},methods:{handleSelectChange(){this.review="",this.advice="",this.email="",this.rating="",this.date="",this.useradvice="",this.errors={review:"",rating:"",email:"",advice:"",date:"",useradvice:""},this.updateSubmitDisabled()},validateReview(){this.review.replace(/\s/g,"").length<10?this.errors.review="Review must be at least 10 characters long":this.errors.review="",this.updateSubmitDisabled()},validateEmail(){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.errors.email="":this.errors.email="Invalid email address",this.updateSubmitDisabled()},validateRating(){const l=parseFloat(this.rating);isNaN(l)||l<1||l>10?this.errors.rating="Rating must be a number between 1 and 10":this.errors.rating="",this.updateSubmitDisabled()},async validateUser(){try{const e=`http://localhost/api/v1/users/${this.useradvice}`;(await c.get(e)).data&&(this.errors.useradvice=""),this.updateSubmitDisabled()}catch{this.errors.useradvice="This user is not registered "}},validateAdvice(){this.advice.replace(/\s/g,"").length<10?this.errors.advice="Advice must be at least 10 characters long":this.errors.advice="",this.updateSubmitDisabled()},validateDate(){this.date?this.errors.date="":this.errors.date="Date cannot be empty",this.updateSubmitDisabled()},validateAndSubmit(){this.selected==="review"?(this.validateReview(),this.validateEmail(),this.validateRating(),this.errors.review===""&&this.errors.email===""&&this.errors.rating===""?(this.review="",this.email="",this.rating=""):console.log("Form is invalid. Please fix errors.")):(this.validateUser(),this.validateAdvice(),this.validateDate(),this.errors.advice===""&&this.errors.date===""&&this.errors.useradvice===""?(this.advice="",this.date="",this.useradvice=""):console.log("Form is invalid. Please fix errors."))},updateSubmitDisabled(){this.isSubmitDisabled=this.errors.email!==""||this.errors.rating!==""||this.errors.review!==""}}},S=s("option",{value:"review",classname:"option"},"Review",-1),D=s("option",{value:"advice",classname:"option"},"Advice",-1),y=[S,D],_={key:0},R=s("p",null,"Email",-1),U={key:0,class:"error"},x=s("p",null,"Rating",-1),k={key:0,class:"error"},A=s("p",null,"Review",-1),I={key:0,class:"error"},V={key:1},C=s("p",null,"User Advice",-1),E={key:0,class:"error"},L=s("p",null,"Date",-1),M={key:0,class:"error"},N=s("p",null,"Advice",-1),P={key:0,class:"error"},B=["disabled"];function F(l,e,h,m,i,r){return d(),a("form",{class:w(["Contact",{"light-mode-contact":i.isLightMode}])},[s("label",null,[n(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.selected=t),onChange:e[1]||(e[1]=(...t)=>r.handleSelectChange&&r.handleSelectChange(...t))},y,544),[[p,i.selected]])]),i.selected==="review"?(d(),a("div",_,[s("label",null,[R,n(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t),onInput:e[3]||(e[3]=(...t)=>r.validateEmail&&r.validateEmail(...t))},null,544),[[v,i.email]]),i.errors.email?(d(),a("div",U,u(i.errors.email),1)):o("",!0)]),s("label",null,[x,n(s("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>i.rating=t),min:"1",max:"10",onInput:e[5]||(e[5]=(...t)=>r.validateRating&&r.validateRating(...t))},null,544),[[v,i.rating]]),i.errors.rating?(d(),a("div",k,u(i.errors.rating),1)):o("",!0)]),s("label",null,[A,n(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.review=t),onInput:e[7]||(e[7]=(...t)=>r.validateReview&&r.validateReview(...t))},null,544),[[v,i.review]]),i.errors.review?(d(),a("div",I,u(i.errors.review),1)):o("",!0)])])):o("",!0),i.selected==="advice"?(d(),a("div",V,[s("label",null,[C,n(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>i.useradvice=t),onInput:e[9]||(e[9]=(...t)=>r.validateUser&&r.validateUser(...t))},null,544),[[v,i.useradvice]]),i.errors.useradvice?(d(),a("div",E,u(i.errors.useradvice),1)):o("",!0)]),s("label",null,[L,n(s("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=t=>i.date=t),onInput:e[11]||(e[11]=(...t)=>r.validateDate&&r.validateDate(...t))},null,544),[[v,i.date]]),i.errors.date?(d(),a("div",M,u(i.errors.date),1)):o("",!0)]),s("label",null,[N,n(s("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>i.advice=t),onInput:e[13]||(e[13]=(...t)=>r.validateAdvice&&r.validateAdvice(...t))},null,544),[[v,i.advice]]),i.errors.advice?(d(),a("div",P,u(i.errors.advice),1)):o("",!0)])])):o("",!0),s("button",{onClick:e[14]||(e[14]=b((...t)=>r.validateAndSubmit&&r.validateAndSubmit(...t),["prevent"])),disabled:i.isSubmitDisabled},"Send",8,B)],2)}const z=g(f,[["render",F]]);export{z as default};
